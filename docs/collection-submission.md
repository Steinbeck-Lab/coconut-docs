
# Submitting a Collection

Sumbition of a Collection of Compounds is a two step process as described below:

1. Creation of a Collection
2. Uploading the compounds into the above created Collection.

## Creation of a Collection

For uploading the compound collection onto COCONUT platform, you need to create a Collection first.

1. Login into your COCONUT account.
2. On the left pane, select "Collections".
3. Inside the Reports page, click on "New collection" button on the top right.
4. Fill the "Create Collection" form:
    * Title - a title for the collection. 
    * Slug - auto generated by COCONUT platform. No need to fill.
    * Description - a description of this collection of compounds. 
    * Url - if the collection is from a source available online, you may provide a url for the same *(this is just for reference for our Curators, this does not import the compounds on to COCONUT).*
    * Tags - comma separated keywords to identify this collection during searches.
    * Identifier - 
    * License - choose a license from the dropdown
5. Click on "Create" or on "Create & create another" if you have another report to submit. This creates an empty collection. To upload molecules/compounds, proceed with below steps.

## Uploading the compounds into the above created Collection

On creating am empty collection a "Entries" pane becomes available at the bottom.

1. Click on "Import Entries" which is to the left on the "Entries pane".
2. In the pop up window, download the template CSV file which gives you the fileds that are expected by the COCONUT in a comma separated format. Provide the following details for each of the molecules.
    * canonical_smiles - Canonical SMILES notation of the given chemical structure.
    * reference_id - reference id as reported in a source database/dataset.
    * name - IUPAC name/trivial name as reported in the original publication or source.
        ::: info Example
        [9-fluoro-11-hydroxy-17-(2-hydroxyacetyl)-10,13,16-trimethyl-3-oxo-6,7,8,11,12,14,15,16-octahydrocyclopenta[a]phenanthren-17-yl] pentanoate
        :::
    * doi - DOI of the original publication where the molecule is first reported
        ::: info Example
        doi.org/10.1021/ci5003697
        :::
    
    * link - database link of the molecule
    * organism - scientific name of the organism in which the compound is found.
        ::: info Example
        Tanacetum parthenium
        :::
    * organism_part - the part of the organism in which the compound is found.
        ::: info Example
        Eyes
        :::
    * COCONUT_id - auto generated by COCONUT platform. No need to fill.
    * mol_filename - If 2D/3D molfile is present for the given molecule, mention its name.
    * structural_comments - comments regarding structure if any.
    * geo_location - geographical location where this molecule is found.
        ::: info Example
        Rajahmundry, India
        :::
    * location - within the geographical location where specifically is the molecule is found.
        ::: info Example
        Air, Water, Soil, etc.
        :::
3. On the same pop up window from step 2, Click on "Upload the CSV" file with all the details of the compounds. Choose the file.
4. Now the pop up window shows columns that are expected on the right and columns detected from the CSV file on the left. This is to make sure the mapping is done properly. Use the dropdowns for any corrections and click on "Import".
    ::: tip Update existing records
     If you have already uploaded the CSV file before and made changes to the details of molecules in the CSV file and wanted to upload the modified CSV file, you need to choose "Update existing records", so that the respective molecules will get updated with the new data provided.
    :::
5. You should see "Import started" notification at the top left.
    ::: warning Only for those in local development
     You need to start Laravel Horizon to process the queued compounds:
     ```
    sail artisan horizon
    ```
    :::
7. Once the processing completes, you should see the compounds listed along with their Status "SUBMITTED".
    ::: warning For status other than "SUBMITTED"
     You may have to recheck the correspoding compound's details in the CSV and reupload it, repeating step 4.
    :::
8. Even if one compound in the uploaded compounds has the status "SUBMITTED", you would see the "Process" button along with "Import entries" button. Clicking this would process the submitted compounds.
9. Wait for the processing to finish. Once done, the status updates to "PASSED" for the entries that got processed successfully and "REJECTED" for those that failed the processing.
    * For the compounds successfully processed, you may check the "Citations" and "Molecules" tab to see if everything is properly processed.
    * Audits tab will have trail of who did what and when on the Collection.
        ::: warning For the failed ones
        You may have to recheck the correspoding compound's details in the CSV and reupload it, repeating step 4.
        :::
10. Even if one Compound passed the process, you would see the "Publish" button. Clicking this would publish the compounds that passed the processing.
    ::: info Collection status vs Compounds' statuses
    After publishing, the staus of the Collection changes from "DRAFT" to "PUBLISHED". Only the Compounds with status "PASSED" would be visible to everyone on the COCONUT platform.
    :::
